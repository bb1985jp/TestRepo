<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="ja">

<head>

<meta http-equiv="Content-Style-Type" content="text/css; charset=Shift-JIS">
<link rel="stylesheet" href="java.css" type="text/css">
<meta http-equiv="Content-Script-Type" content="text/javascript">
<meta http-equiv="Content-Type" content="text/html; charset=shift_jis">
<meta content="Java,Swing,Tips,右クリック" name="keywords">

<title>Java Swing サンプル集</title>
</head>

<body>
<table class="table_1" align="center" summary="Swing,Look and Feel">
<tbody>
<tr>
<td class="table_1">
<table summary="outline">
<tbody>
<tr>
<td class="title_site">
Java Swing サンプル集
</td>
</tr>
<tr>
<td valign="top" align="center">
<hr>
</td>
</tr>
<tr>
<td>
<a href="index.html">Top Page</a>                         
<br>                         
</td>                         
</tr>                         
<tr>                         
<td class="title_page">                         
<img border="0" src="images/glass_icon2.gif" width="16" height="16" alt="*">                         
 右クリックメニューの表示<br>                       
<img border="0" src="images/ber91.gif" class="title_page_line" alt="-" width="432" height="15">                       
</td>                       
</tr>                       
<tr>                       
<td class="title_section">                       
<div class="space">                       
<img src="images/threesquare_icon002.gif" width="12" height="10" alt="･">説明<br>                       
                       
<img src="images/ber005.gif" class="section_line" alt="-" width="150" height="5"> 
</div>                       
</td>                       
</tr>                       
<tr>                       
<td>                       
                       
<table summary="description">                       
<tbody>                       
<tr>                       
<td class="column_left">                       
                       
<br>                       
デフォルトではText系コンポーネント上でも右クリックメニューは表示されません。<br>                 
右クリックを表示させるためには、以下の手順で実装します。<br>                        
<ol>                 
<li>右クリック時に表示させるJMenuItemのインスタンスをメニュー数分生成する。<br>                 
このJMenuItemのパラメータが右クリック時に表示される文字列になる。</li>               
                 
<li><div class="space">上記の各メニューが選択された際の処理をActionListenerを実装したクラスに定義し、                 
インスタンスをそれぞれ生成、JMenuItemに追加しておく。<br>               
メニュー選択時は、このクラス内のactionPerformed()イベントがコールされる。                 
</div></li>               
                 
<li><div class="space">JMenuItemが貼り付くJPopupMenuのインスタンスを生成し、                 
上から表示する順番でJMenuItemインスタンスをaddする。</div></li>                 
<li><div class="space">右クリックを表示させたいコンポーネントにマウスリスナーを追加し、                 
マウス押下イベント発生時に上記JPopupMenuインスタンスを表示するように実装しておく。</div></li>                 
</ol>                 
</td>                        
<td class="column_right">                        
                        
<!-- ///// Amazon ///// -->                        
                        
<iframe src="http://rcm-jp.amazon.co.jp/e/cm?t=bb1985-22&o=9&p=10&l=st1&mode=books-jp&search=Java%20Swing%20GUI&fc1=000000&lt1=&lc1=3366FF&bg1=FFFFFF&f=ifr" marginwidth="0" marginheight="0" width="120" height="450" border="0" frameborder="0" style="border:none;" scrolling="no"></iframe>                        
                        
<!-- ///// Amazon ///// -->                        
                        
</td>                        
</tr>                        
</tbody>                        
</table>                        
</td>                        
</tr>                        
<tr>                        
<td>                        
<div class="space_both">                        
<img border="0" src="app/images/right_click.jpg" width="300" height="200" alt="app">                       
</div>                       
<div class="space">                       
サンプルソース : <a href="src/src_right_click.zip">src_right_click.zip</a>                        
</div>                        
<div class="space_both">                        
サンプルアプリ : <a href="app/sample_right_click.jar">sample_right_click.jar</a>                        
</div>                        
</td>                        
</tr>                        
<tr>                        
<td class="title_section">                        
<div class="space">                        
<img border="0" src="images/threesquare_icon002.gif" width="12" height="10" alt="･">コード例<br>                        
                        
<img src="images/ber005.gif" class="section_line" alt="-" width="150" height="5"> 
</div>                        
</td>                        
</tr>                        
<tr>                        
<td>                        
<br>                        
<table class="table_code" summary="code">                        
  <tbody>                        
  <tr>                        
    <td>                        
    <pre>    private void initializeRightClickMenu(Component component) {
        // 右クリック用のメニューを定義
        JMenuitem jmenuitem1, jmenuitem2;
        jmenuitem1 = new JMenuitem(&quot;red&quot;);          // １つ目のメニュー
        jmenuitem2 = new JMenuitem(&quot;blue&quot;);         // ２つ目のメニュー
        
        // 各メニュー選択時の処理
        jmenuitem1.addActionListener(new SampleActionListener(&quot;Red&quot;));
        jmenuitem2.addActionListener(new SampleActionListener(&quot;Blue&quot;));
        
        // 右クリック時に表示するポップアップを定義
        JPopupmenu jpopup = new JPopupmenu();
        jpopup.add(jmenuitem1);             // red
        jpopup.add(jmenuitem2);             // blue
        
        // マウスイベント用リスナー追加
        component.addMouseListener(new SampleMouseListener(
                component, jpopup));
        // ポップアップをフレームに設定
        jframe.add(jpopup);
    }

    /**
     * マウスイベントリスナー
     */
    class SampleMouseListener extends MouseAdapter {
        
        /**
         * イベント発生元のコンポーネント
         */
        private Component component;

        /**
         * 表示するポップアップ
         */
        JPopupMenu jpopup;

        /**
         * コンストラクタ
         * 
         * @param component イベント発生元のコンポーネント
         * @param jpopup 表示するポップアップ
         */
        public SampleMouseListener(Component component, JPopupMenu jpopup) {
            super();
            this.component = component;
            this.jpopup = jpopup;
        }
        
        /**
         * コンポーネント上でマウスボタンを押すと呼び出されます。
         */
        public void mousePressed(MouseEvent e){
            
            /** 右押下時のみ **/
            if(SwingUtilities.isRightMouseButton(e)) {
                
                // クリックされた位置にポップアップを表示
                jpopup.show(component, e.getX(), e.getY());
            }
        }
    }
    
    /**
     * メニュー選択時の処理
     */
    class SampleEventListener implements ActionListener {

        /**
         * 色を表す文字列
         */
        private String color;
        
        /**
         * コンストラクタ
         * 
         * @param color 色を表す文字列
         */
        public SampleEventListener(String color) {
            super();
            this.color = color;
        }
        
        /**
         * イベント発生時の処理
         */
        public void actionPerformed(ActionEvent e) {
            
            if(color.equals(&quot;Red&quot;)) {
                jPanel.setBackground(Color.RED);
            }
            else if(color.equals(&quot;Blue&quot;)) {
                jPanel.setBackground(Color.BLUE);
            }
        }
    }
</pre>                        
    </td>                        
  </tr>                        
  </tbody>                        
</table>                        
</td>                        
</tr>                        
                        
<tr>                        
<td>                        
<br>                        
                        
</td>                        
</tr>                   
</tbody>                   
</table>                        
<br>    
<!-- Java Swing Tips Sample GUI サンプル -->                         
<!-- ///// Google ///// -->                                
<script type="text/javascript"><!--         
google_ad_client = "pub-4667966388895726";         
/* 728x90, 作成済み 09/01/26 */         
google_ad_slot = "1570626113";         
google_ad_width = 728;         
google_ad_height = 90;         
google_language = 'ja';         
//-->         
</script>         
<script type="text/javascript"         
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">         
</script>         
<!-- ///// Google ///// -->                                
</td>        
</tr>        
</tbody>        
</table>        
</body>                        
                        
</html>                        
